import 'package:dio/dio.dart';
import 'package:humhub/pages/web_view.dart';
import 'package:humhub/util/const.dart';
import 'package:humhub/util/openers/universal_opener_controller.dart';
import 'package:loggy/loggy.dart';
import 'package:quick_actions/quick_actions.dart';
import '../util/quick_actions/quick_actions_provider.dart';

class ManifestIcon {
  final String src;
  final String type;
  final String sizes;

  ManifestIcon({required this.src, required this.type, required this.sizes});

  factory ManifestIcon.fromJson(Map<String, dynamic> json) {
    return ManifestIcon(
      src: json['src'] as String,
      type: json['type'] as String,
      sizes: json['sizes'] as String,
    );
  }

  Map<String, dynamic> toJson() => {
        'src': src,
        'type': type,
        'sizes': sizes,
      };
}

class Manifest {
  final String display;
  final String startUrl;
  final String shortName;
  final String name;
  final String backgroundColor;
  final String themeColor;
  final List<ManifestIcon>? icons;

  Manifest({
    required this.display,
    required this.startUrl,
    required this.shortName,
    required this.name,
    required this.backgroundColor,
    required this.themeColor,
    required this.icons,
  });

  String get baseUrl {
    Uri url = Uri.parse(startUrl);
    return url.origin;
  }

  factory Manifest.fromJson(Map<String, dynamic> json) {
    var iconsJson = json['icons'] as List<dynamic>?;
    List<ManifestIcon>? iconsList =
        iconsJson?.map((icon) => ManifestIcon.fromJson(icon as Map<String, dynamic>)).toList();

    return Manifest(
      display: json['display'] as String,
      startUrl: json['start_url'] as String,
      shortName: json['short_name'] as String,
      name: json['name'] as String,
      backgroundColor: json['background_color'] as String,
      themeColor: json['theme_color'] as String,
      icons: iconsList,
    );
  }

  Map<String, dynamic> toJson() => {
        'display': display,
        'start_url': startUrl,
        'short_name': shortName,
        'name': name,
        'background_color': backgroundColor,
        'theme_color': themeColor,
        'icons': icons?.map((icon) => icon.toJson()).toList(),
      };

  static Future<Manifest> Function(Dio dio) get(String url) => (dio) async {
        Response<dynamic> res = await dio.get(url);
        return Manifest.fromJson(res.data);
      };

  static String getUriWithoutExtension(String url) {
    int lastSlashIndex = url.lastIndexOf('/');
    // If there is no slash or only one character after the last slash, return the original URL
    if (lastSlashIndex < 0 || lastSlashIndex == url.length - 1) {
      return url;
    }
    // Remove everything after the last slash, including the slash itself
    return url.substring(0, lastSlashIndex);
  }

  static String defineUrl(String url, {bool isUriPretty = true}) {
    return !isUriPretty ? '$url/index.php?r=web%2Fpwa-manifest%2Findex' : '$url/manifest.json';
  }

  InternalShortcut get shortcut {
    return InternalShortcut(
        shortcut: ShortcutItem(
          type: startUrl,
          localizedTitle: name,
          localizedSubtitle: name,
          //icon: 'ic_launcher',
          //iconBase64: "data:image/png;base64,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"
        ),
        action: () async {
          logInfo('MD222- shotcut on action');
          UniversalOpenerController opener = UniversalOpenerController(url: startUrl);
          await opener.initHumHub();
          Keys.navigatorKey.currentState!.pushNamed(WebView.path, arguments: opener);
        });
  }
}
